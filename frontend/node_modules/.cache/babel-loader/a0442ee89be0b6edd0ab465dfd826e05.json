{"ast":null,"code":"export class Api {\n  constructor(config) {\n    this.getCardList = () => this._fetch('GET', 'include', '/cards');\n\n    this.getUserInfo = () => this._fetch('GET', 'include', '/users/me');\n\n    this.deleteLike = id => this._fetch('DELETE', 'include', '/cards/likes/' + id);\n\n    this.putLike = id => this._fetch('PUT', 'include', '/cards/likes/' + id);\n\n    this.changeLikeCardStatus = (id, isLiked) => isLiked ? this.putLike(id) : this.deleteLike(id);\n\n    this.deleteCard = id => this._fetch('DELETE', 'include', '/cards/' + id);\n\n    this.setUserInfo = (name, about) => this._fetch('PATCH', 'include', '/users/me', {\n      name,\n      about\n    });\n\n    this.setUserAvatar = link => this._fetch('PATCH', 'include', '/users/me/avatar', {\n      'avatar': link\n    });\n\n    this.addNewCard = body => this._fetch('POST', 'include', '/cards', body);\n\n    this.url = config.url;\n    this.headers = config.headers;\n  }\n\n  _fetch(method, credentials, path, body) {\n    let options = {\n      method,\n      credentials,\n      headers: this.headers\n    };\n\n    if ((method === 'PATCH' || method === 'POST') && body) {\n      options = { ...options,\n        body: JSON.stringify(body)\n      };\n    } // return fetch(this.url + 'cohort-25' + path, options)\n\n\n    return fetch(this.url + path, options).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n}\nconst api = new Api({\n  // url: 'https://mesto.nomoreparties.co/v1/',\n  // headers: {\n  //     authorization: '6c5c2ad0-ab62-45ad-b6d9-d0d31ad5dd6b',\n  //     'Content-type': 'application/json'\n  // }\n  url: 'https://api.vitaliymont.students.nomoredomains.club',\n  headers: {\n    'Content-type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"sources":["/Users/vitaliidolzhenko/WebstormProjects/mesto-vetal/frontend/src/utils/api.js"],"names":["Api","constructor","config","getCardList","_fetch","getUserInfo","deleteLike","id","putLike","changeLikeCardStatus","isLiked","deleteCard","setUserInfo","name","about","setUserAvatar","link","addNewCard","body","url","headers","method","credentials","path","options","JSON","stringify","fetch","then","res","ok","json","Promise","reject","status","api"],"mappings":"AAAA,OAAO,MAAMA,GAAN,CAAU;AACbC,EAAAA,WAAW,CAACC,MAAD,EAAS;AAAA,SAMpBC,WANoB,GAMN,MAAM,KAAKC,MAAL,CAAY,KAAZ,EAAmB,SAAnB,EAA8B,QAA9B,CANA;;AAAA,SAQpBC,WARoB,GAQN,MAAM,KAAKD,MAAL,CAAY,KAAZ,EAAkB,SAAlB,EAA6B,WAA7B,CARA;;AAAA,SAUpBE,UAVoB,GAUNC,EAAD,IAAQ,KAAKH,MAAL,CAAY,QAAZ,EAAqB,SAArB,EAAgC,kBAAkBG,EAAlD,CAVD;;AAAA,SAYpBC,OAZoB,GAYTD,EAAD,IAAQ,KAAKH,MAAL,CAAY,KAAZ,EAAkB,SAAlB,EAA6B,kBAAkBG,EAA/C,CAZE;;AAAA,SAcpBE,oBAdoB,GAcG,CAACF,EAAD,EAAKG,OAAL,KAAiBA,OAAO,GAAG,KAAKF,OAAL,CAAaD,EAAb,CAAH,GAAsB,KAAKD,UAAL,CAAgBC,EAAhB,CAdjD;;AAAA,SAgBpBI,UAhBoB,GAgBNJ,EAAD,IAAQ,KAAKH,MAAL,CAAY,QAAZ,EAAqB,SAArB,EAAgC,YAAYG,EAA5C,CAhBD;;AAAA,SAkBpBK,WAlBoB,GAkBN,CAACC,IAAD,EAAOC,KAAP,KAAiB,KAAKV,MAAL,CAAY,OAAZ,EAAoB,SAApB,EAA+B,WAA/B,EAA4C;AAACS,MAAAA,IAAD;AAAOC,MAAAA;AAAP,KAA5C,CAlBX;;AAAA,SAoBpBC,aApBoB,GAoBHC,IAAD,IAAU,KAAKZ,MAAL,CAAY,OAAZ,EAAoB,SAApB,EAA+B,kBAA/B,EAAmD;AAAC,gBAAUY;AAAX,KAAnD,CApBN;;AAAA,SAsBpBC,UAtBoB,GAsBNC,IAAD,IAAU,KAAKd,MAAL,CAAY,MAAZ,EAAmB,SAAnB,EAA8B,QAA9B,EAAwCc,IAAxC,CAtBH;;AAChB,SAAKC,GAAL,GAAWjB,MAAM,CAACiB,GAAlB;AACA,SAAKC,OAAL,GAAelB,MAAM,CAACkB,OAAtB;AACH;;AAsBDhB,EAAAA,MAAM,CAACiB,MAAD,EAASC,WAAT,EAAsBC,IAAtB,EAA4BL,IAA5B,EAAkC;AACpC,QAAIM,OAAO,GAAG;AACVH,MAAAA,MADU;AAEVC,MAAAA,WAFU;AAGVF,MAAAA,OAAO,EAAE,KAAKA;AAHJ,KAAd;;AAKA,QAAI,CAACC,MAAM,KAAK,OAAX,IAAsBA,MAAM,KAAK,MAAlC,KAA6CH,IAAjD,EAAuD;AACnDM,MAAAA,OAAO,GAAG,EACN,GAAGA,OADG;AAENN,QAAAA,IAAI,EAAEO,IAAI,CAACC,SAAL,CAAeR,IAAf;AAFA,OAAV;AAIH,KAXmC,CAYpC;;;AACA,WAAOS,KAAK,CAAC,KAAKR,GAAL,GAAWI,IAAZ,EAAkBC,OAAlB,CAAL,CACFI,IADE,CACGC,GAAG,IAAI;AACT,UAAIA,GAAG,CAACC,EAAR,EAAY;AACR,eAAOD,GAAG,CAACE,IAAJ,EAAP;AACH;;AACD,aAAOC,OAAO,CAACC,MAAR,CAAgB,WAAUJ,GAAG,CAACK,MAAO,EAArC,CAAP;AACH,KANE,CAAP;AAOH;;AA9CY;AAiDjB,MAAMC,GAAG,GAAG,IAAInC,GAAJ,CAAQ;AAChB;AACA;AACA;AACA;AACA;AACAmB,EAAAA,GAAG,EAAE,qDANW;AAOhBC,EAAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AAPO,CAAR,CAAZ;AAYA,eAAee,GAAf","sourcesContent":["export class Api {\n    constructor(config) {\n        this.url = config.url;\n        this.headers = config.headers;\n    }\n\n\n    getCardList = () => this._fetch('GET', 'include', '/cards');\n\n    getUserInfo = () => this._fetch('GET','include', '/users/me');\n\n    deleteLike = (id) => this._fetch('DELETE','include', '/cards/likes/' + id);\n\n    putLike = (id) => this._fetch('PUT','include', '/cards/likes/' + id);\n\n    changeLikeCardStatus = (id, isLiked) => isLiked ? this.putLike(id) : this.deleteLike(id);\n\n    deleteCard = (id) => this._fetch('DELETE','include', '/cards/' + id);\n\n    setUserInfo = (name, about) => this._fetch('PATCH','include', '/users/me', {name, about});\n\n    setUserAvatar = (link) => this._fetch('PATCH','include', '/users/me/avatar', {'avatar': link});\n\n    addNewCard = (body) => this._fetch('POST','include', '/cards', body);\n\n\n    _fetch(method, credentials, path, body) {\n        let options = {\n            method,\n            credentials,\n            headers: this.headers,\n        };\n        if ((method === 'PATCH' || method === 'POST') && body) {\n            options = {\n                ...options,\n                body: JSON.stringify(body)\n            };\n        }\n        // return fetch(this.url + 'cohort-25' + path, options)\n        return fetch(this.url + path, options)\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(`Ошибка: ${res.status}`);\n            });\n    }\n}\n\nconst api = new Api({\n    // url: 'https://mesto.nomoreparties.co/v1/',\n    // headers: {\n    //     authorization: '6c5c2ad0-ab62-45ad-b6d9-d0d31ad5dd6b',\n    //     'Content-type': 'application/json'\n    // }\n    url: 'https://api.vitaliymont.students.nomoredomains.club',\n    headers: {\n        'Content-type': 'application/json',\n    }\n\n});\nexport default api;\n\n\n"]},"metadata":{},"sourceType":"module"}