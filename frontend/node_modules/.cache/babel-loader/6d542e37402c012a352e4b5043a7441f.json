{"ast":null,"code":"var _jsxFileName = \"/Users/vitaliidolzhenko/WebstormProjects/mesto-vetal/frontend/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { Redirect, Route, Switch, withRouter } from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport fail from \"../images/info-tooltip-fail.svg\";\nimport successImg from \"../images/info-tooltip-success.svg\";\nimport * as auth from '../utils/auth.js'; // import {Cookies} from 'react-cookie'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App(props) {\n  _s();\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [registered, setRegistered] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAuthChecking, setIsAuthChecking] = React.useState(true);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [email, setEmail] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]); // Выход из системы\n\n  const onSignOut = () => {\n    auth.logout().then(res => {\n      if (res) {\n        setLoggedIn(false);\n      }\n    }).catch(err => console.log(`Error: ${err}`));\n  };\n\n  const handleRegister = (password, email) => {\n    auth.register(password, email).then(res => {\n      if (res.hasOwnProperty('error')) {\n        setRegistered(false);\n      } else {\n        setRegistered(true);\n        setEmail({\n          email: res.data.email\n        });\n      }\n\n      setIsInfoTooltipOpen(true);\n    }).catch(err => console.log(err));\n  }; //\n  // const successfulAuth = useCallback(() => {\n  //     Promise.all([api.getUserInfo(), api.getCardList()])\n  //         .then(([cards, currentUser]) => {\n  //             setCards(cards.data);\n  //             setCurrentUser(currentUser.data);\n  //         })\n  //         .catch((err) => console.log(err))\n  //\n  //\n  //     setLoggedIn(true);\n  //     props.history.push('/');\n  // }, [props.history]);\n  // Успешное прохождение авторизации\n\n\n  const successfulAuth = useCallback(() => {\n    api.getUserInfo().then(data => {\n      if (!data) throw new Error(`Error: ${data.message}`);\n      setCurrentUser(data);\n    }).catch(error => {\n      console.log(error);\n    });\n    api.getCardList().then(data => {\n      if (!data) throw new Error(`Error: ${data.message}`);\n\n      if (Array.isArray(data)) {\n        setCards(data);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n    setLoggedIn(true);\n    props.history.push('/');\n  }, [props.history]);\n\n  const onLogin = (password, email) => {\n    auth.authorize(password, email).then(data => {\n      if (!data) throw new Error(`Error: ${data.message}`);\n\n      if (data) {\n        setEmail({\n          email: email\n        });\n        successfulAuth();\n      } else {\n        setIsInfoTooltipOpen(true);\n      }\n    }).catch(err => {\n      setIsInfoTooltipOpen(true);\n      console.log(err);\n    });\n  }; // Проверка авторизации пользователя\n\n\n  useEffect(() => {\n    setIsAuthChecking(true);\n    auth.checkAuth().then(res => {\n      if (res) {\n        successfulAuth(); // setEmail({email: res.data.email});\n      }\n    }).catch(() => {\n      setIsAuthChecking(false);\n      props.history.push('/sigin');\n    }).finally(() => {\n      setIsAuthChecking(false);\n    });\n  }, [props.history, successfulAuth]); // useEffect(() => {\n  //     if (!loggedIn) return;\n  //     api.getCardList()\n  //         .then(data => {\n  //             setCards(data);\n  //         })\n  //         .catch(error => {\n  //             console.log(error);\n  //         });\n  // }, [loggedIn]);\n  //\n  // useEffect(() => {\n  //     if (!loggedIn) return;\n  //     api.getUserInfo()\n  //         .then(data => {\n  //             setCurrentUser(data);\n  //         })\n  //         .catch(error => {\n  //             console.log(error);\n  //         });\n  // }, [loggedIn]);\n  // useEffect(() => {\n  //     if (loggedIn) {\n  //         auth.checkToken()\n  //             .then((res) => {\n  //                 if (res) {\n  //                     setEmail({email: res.data.email});\n  //                     setLoggedIn(true);\n  //                 }\n  //\n  //             })\n  //             .then(() => {\n  //                 props.history.push(\"/\");\n  //\n  //             })\n  //             .catch(error => {\n  //                 console.log(error);\n  //             });\n  //\n  //     }\n  // }, [props.history, loggedIn]);\n  // const onLogin = (password, email) => {\n  //     auth.authorize(password, email)\n  //         .then((data) => {\n  //             if (data && data.hasOwnProperty('token')) {\n  //                 // const cookies = new Cookies();\n  //                 // cookies.set('token', data.token);\n  //                 localStorage.setItem('token', data.token);\n  //                 setEmail({email: email});\n  //                 setLoggedIn(true);\n  //                 props.history.push(\"/\");\n  //             } else {\n  //                 setIsInfoTooltipOpen(true);\n  //             }\n  //         })\n  //         .catch(err => {\n  //             setIsInfoTooltipOpen(true);\n  //             console.log(err);\n  //         });\n  // };\n  // useEffect(() => {\n  //     // const cookies = new Cookies();\n  //     if (localStorage.getItem('token')) {\n  //         const jwt = localStorage.getItem('token');\n  //         // if (cookies.get('jwt')) {\n  //         //     const jwt = cookies.get('jwt');\n  //         // проверяем токен пользователя\n  //         auth.checkToken(jwt)\n  //             .then((res) => {\n  //                 if (res) {\n  //                     setEmail({email: res.data.email});\n  //                     setLoggedIn(true);\n  //                 }\n  //\n  //             })\n  //             .then(() => {\n  //                 props.history.push(\"/\");\n  //\n  //             })\n  //             .catch(error => {\n  //                 console.log(error);\n  //             });\n  //\n  //     }\n  // }, [props.history]);\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const onInfoTooltipClose = () => {\n    closeAllPopups();\n\n    if (registered) {\n      setTimeout(() => props.history.push(\"/signin\"), 1000);\n    }\n  };\n\n  const closeAllPopups = () => {\n    setIsInfoTooltipOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n  };\n\n  const handleCardClick = card => {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  };\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n  const handleUpdateUser = currentUser => {\n    api.setUserInfo(currentUser.name, currentUser.about).then(data => {\n      setCurrentUser(data);\n      closeAllPopups();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const handleUpdateAvatar = avatar => {\n    api.setUserAvatar(avatar).then(data => {\n      setCurrentUser(data);\n      closeAllPopups();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id); // Отправляем запрос в API и получаем обновлённые данные карточки\n\n    api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n      setCards(state => state.map(c => c._id === card._id ? newCard : c));\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then(_ => {\n      setCards(state => state.filter(c => c._id !== card._id));\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  function handleAddPlace(e, card) {\n    api.addNewCard(card).then(card => {\n      setCards([card, ...cards]);\n      closeAllPopups();\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page\",\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          onSignOut: onSignOut,\n          userData: email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/signin\",\n            children: [/*#__PURE__*/_jsxDEV(InfoTooltip, {\n              isOpen: isInfoTooltipOpen,\n              onClose: closeAllPopups,\n              image: fail,\n              title: 'Что-то пошло не так! Попробуйте ещё раз.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Login, {\n              handleLogin: onLogin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/signup\",\n            children: [/*#__PURE__*/_jsxDEV(InfoTooltip, {\n              isOpen: isInfoTooltipOpen,\n              onClose: onInfoTooltipClose,\n              image: registered ? successImg : fail,\n              title: registered ? 'Вы успешно зарегестрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Register, {\n              onRegister: handleRegister\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            children: [/*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              exact: true,\n              path: \"/\",\n              isChecking: isAuthChecking,\n              loggedIn: loggedIn,\n              component: Main,\n              onEditProfile: handleEditProfileClick,\n              onAddPlace: handleAddPlaceClick,\n              onEditAvatar: handleEditAvatarClick,\n              cards: cards,\n              handleCardClick: handleCardClick,\n              setCards: setCards,\n              onCardLike: handleCardLike,\n              onCardDelete: handleCardDelete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 29\n            }, this), loggedIn ? /*#__PURE__*/_jsxDEV(Redirect, {\n              to: \"/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 42\n            }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n              to: \"/signin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 65\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n          isOpen: isEditProfilePopupOpen,\n          onUpdateUser: handleUpdateUser,\n          onClose: closeAllPopups\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n          isOpen: isAddPlacePopupOpen,\n          onAddPlaceSubmit: handleAddPlace,\n          onClose: closeAllPopups\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n          isOpen: isEditAvatarPopupOpen,\n          onUpdateAvatar: handleUpdateAvatar,\n          onClose: closeAllPopups\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n          name: \"delete-image\",\n          title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n          buttonName: \"\\u0414\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n          card: selectedCard,\n          onClose: closeAllPopups,\n          isOpen: isImagePopupOpen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"G4VcrVc6jxpUCqG9+YTDj2Y6z2Y=\");\n\n_c = App;\nexport default _c2 = withRouter(App);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/vitaliidolzhenko/WebstormProjects/mesto-vetal/frontend/src/components/App.js"],"names":["React","useCallback","useEffect","Header","Main","Footer","PopupWithForm","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","Redirect","Route","Switch","withRouter","Login","Register","InfoTooltip","ProtectedRoute","auth","App","props","loggedIn","setLoggedIn","useState","registered","setRegistered","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAuthChecking","setIsAuthChecking","isInfoTooltipOpen","setIsInfoTooltipOpen","email","setEmail","currentUser","setCurrentUser","cards","setCards","onSignOut","logout","then","res","catch","err","console","log","handleRegister","password","register","hasOwnProperty","data","successfulAuth","getUserInfo","Error","message","error","getCardList","Array","isArray","history","push","onLogin","authorize","checkAuth","finally","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","onInfoTooltipClose","closeAllPopups","setTimeout","setIsImagePopupOpen","handleCardClick","card","setSelectedCard","selectedCard","isImagePopupOpen","handleUpdateUser","setUserInfo","name","about","handleUpdateAvatar","avatar","setUserAvatar","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","_","filter","handleAddPlace","e","addNewCard","fail","successImg"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect} from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport {Redirect, Route, Switch, withRouter} from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport fail from '../images/info-tooltip-fail.svg';\nimport successImg from '../images/info-tooltip-success.svg';\nimport * as auth from '../utils/auth.js';\n\n// import {Cookies} from 'react-cookie'\n\n\nfunction App(props) {\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [registered, setRegistered] = React.useState(false);\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [isAuthChecking, setIsAuthChecking] = React.useState(true);\n    const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n    const [email, setEmail] = React.useState({});\n\n    const [currentUser, setCurrentUser] = React.useState({});\n    const [cards, setCards] = React.useState([]);\n\n    // Выход из системы\n    const onSignOut = () => {\n        auth.logout()\n            .then((res) => {\n                if (res) {\n                    setLoggedIn(false);\n                }\n            })\n            .catch((err) => console.log(`Error: ${err}`));\n    };\n\n\n\n    const handleRegister = (password, email) => {\n\n        auth.register(password, email)\n            .then((res) => {\n                if (res.hasOwnProperty('error')) {\n                    setRegistered(false);\n                } else {\n                    setRegistered(true);\n                    setEmail({email: res.data.email});\n                }\n                setIsInfoTooltipOpen(true);\n            })\n            .catch((err) => console.log(err));\n    };\n    //\n    // const successfulAuth = useCallback(() => {\n    //     Promise.all([api.getUserInfo(), api.getCardList()])\n    //         .then(([cards, currentUser]) => {\n    //             setCards(cards.data);\n    //             setCurrentUser(currentUser.data);\n    //         })\n    //         .catch((err) => console.log(err))\n    //\n    //\n    //     setLoggedIn(true);\n    //     props.history.push('/');\n    // }, [props.history]);\n\n    // Успешное прохождение авторизации\n    const successfulAuth = useCallback(() => {\n        api.getUserInfo()\n            .then(data => {\n                if (!data) throw new Error(`Error: ${data.message}`);\n                setCurrentUser(data);\n            })\n            .catch(error => {\n                console.log(error);\n            })\n\n        api.getCardList()\n            .then((data) => {\n                if (!data) throw new Error(`Error: ${data.message}`);\n                if(Array.isArray(data))  {\n                    setCards(data);\n                }\n            })\n            .catch(error => {\n                console.log(error);\n            })\n\n        setLoggedIn(true);\n        props.history.push('/');\n    }, [props.history]);\n\n    const onLogin = (password, email) => {\n        auth.authorize(password, email)\n            .then((data) => {\n                if (!data) throw new Error(`Error: ${data.message}`);\n                if (data) {\n                    setEmail({email: email});\n                    successfulAuth();\n                } else {\n                    setIsInfoTooltipOpen(true);\n                }\n            })\n            .catch(err => {\n                setIsInfoTooltipOpen(true);\n                console.log(err);\n            });\n    };\n\n\n\n    // Проверка авторизации пользователя\n    useEffect(() => {\n        setIsAuthChecking(true)\n\n        auth.checkAuth()\n            .then(res => {\n                if (res) {\n                    successfulAuth();\n                    // setEmail({email: res.data.email});\n                }\n            })\n            .catch(() => {\n                setIsAuthChecking(false)\n                props.history.push('/sigin')\n            })\n            .finally(() => {\n                setIsAuthChecking(false)\n            });\n\n    }, [props.history, successfulAuth]);\n\n\n\n    // useEffect(() => {\n    //     if (!loggedIn) return;\n    //     api.getCardList()\n    //         .then(data => {\n    //             setCards(data);\n    //         })\n    //         .catch(error => {\n    //             console.log(error);\n    //         });\n    // }, [loggedIn]);\n    //\n    // useEffect(() => {\n    //     if (!loggedIn) return;\n    //     api.getUserInfo()\n    //         .then(data => {\n    //             setCurrentUser(data);\n    //         })\n    //         .catch(error => {\n    //             console.log(error);\n    //         });\n    // }, [loggedIn]);\n\n\n\n    // useEffect(() => {\n    //     if (loggedIn) {\n    //         auth.checkToken()\n    //             .then((res) => {\n    //                 if (res) {\n    //                     setEmail({email: res.data.email});\n    //                     setLoggedIn(true);\n    //                 }\n    //\n    //             })\n    //             .then(() => {\n    //                 props.history.push(\"/\");\n    //\n    //             })\n    //             .catch(error => {\n    //                 console.log(error);\n    //             });\n    //\n    //     }\n    // }, [props.history, loggedIn]);\n\n\n    // const onLogin = (password, email) => {\n    //     auth.authorize(password, email)\n    //         .then((data) => {\n    //             if (data && data.hasOwnProperty('token')) {\n    //                 // const cookies = new Cookies();\n    //                 // cookies.set('token', data.token);\n    //                 localStorage.setItem('token', data.token);\n    //                 setEmail({email: email});\n    //                 setLoggedIn(true);\n    //                 props.history.push(\"/\");\n    //             } else {\n    //                 setIsInfoTooltipOpen(true);\n    //             }\n    //         })\n    //         .catch(err => {\n    //             setIsInfoTooltipOpen(true);\n    //             console.log(err);\n    //         });\n    // };\n\n\n    // useEffect(() => {\n    //     // const cookies = new Cookies();\n    //     if (localStorage.getItem('token')) {\n    //         const jwt = localStorage.getItem('token');\n    //         // if (cookies.get('jwt')) {\n    //         //     const jwt = cookies.get('jwt');\n    //         // проверяем токен пользователя\n    //         auth.checkToken(jwt)\n    //             .then((res) => {\n    //                 if (res) {\n    //                     setEmail({email: res.data.email});\n    //                     setLoggedIn(true);\n    //                 }\n    //\n    //             })\n    //             .then(() => {\n    //                 props.history.push(\"/\");\n    //\n    //             })\n    //             .catch(error => {\n    //                 console.log(error);\n    //             });\n    //\n    //     }\n    // }, [props.history]);\n\n\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen(true);\n    };\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen(true);\n    };\n\n    const handleEditAvatarClick = () => {\n        setIsEditAvatarPopupOpen(true);\n    };\n\n\n    const onInfoTooltipClose = () => {\n        closeAllPopups();\n        if (registered) {\n            setTimeout(() => props.history.push(\"/signin\"), 1000);\n        }\n\n    };\n\n    const closeAllPopups = () => {\n        setIsInfoTooltipOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setIsImagePopupOpen(false);\n    };\n\n    const handleCardClick = (card) => {\n        setSelectedCard(card);\n        setIsImagePopupOpen(true);\n    };\n\n\n\n    const [selectedCard, setSelectedCard] = React.useState({});\n    const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n    const handleUpdateUser = (currentUser) => {\n        api.setUserInfo(currentUser.name, currentUser.about)\n            .then(data => {\n                setCurrentUser(data);\n                closeAllPopups();\n\n            })\n            .catch(error => {\n                console.log(error);\n            });\n\n    };\n\n    const handleUpdateAvatar = (avatar) => {\n        api.setUserAvatar(avatar)\n            .then(data => {\n                setCurrentUser(data);\n                closeAllPopups();\n            })\n            .catch(error => {\n                console.log(error);\n            });\n\n    };\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        // Отправляем запрос в API и получаем обновлённые данные карточки\n        api.changeLikeCardStatus(card._id, !isLiked)\n            .then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n            .then(_ => {\n                setCards((state) => state.filter((c) => c._id !== card._id));\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    function handleAddPlace(e, card) {\n        api.addNewCard(card)\n            .then(card => {\n                setCards([card, ...cards]);\n                closeAllPopups();\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    return (\n        <div className=\"App\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <div className=\"page\">\n                    <Header onSignOut={onSignOut} userData={email}/>\n                    <Switch>\n                        <Route path=\"/signin\">\n\n                            <InfoTooltip\n                                isOpen={isInfoTooltipOpen}\n                                onClose={closeAllPopups}\n                                image={fail}\n                                title={'Что-то пошло не так! Попробуйте ещё раз.'}\n\n                            />\n                            <Login handleLogin={onLogin}/>\n                        </Route>\n                        <Route path=\"/signup\">\n\n                            <InfoTooltip\n                                isOpen={isInfoTooltipOpen}\n                                onClose={onInfoTooltipClose}\n                                image={registered ? successImg : fail}\n                                title={registered ? 'Вы успешно зарегестрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\n\n                            />\n                            <Register\n                                onRegister={handleRegister}/>\n\n                        </Route>\n\n                        <Route>\n\n\n                            <ProtectedRoute exact path=\"/\"\n                                            isChecking={isAuthChecking}\n                                            loggedIn={loggedIn}\n                                            component={Main}\n                                            onEditProfile={handleEditProfileClick}\n                                            onAddPlace={handleAddPlaceClick}\n                                            onEditAvatar={handleEditAvatarClick}\n                                            cards={cards}\n                                            handleCardClick={handleCardClick}\n                                            setCards={setCards}\n                                            onCardLike={handleCardLike}\n                                            onCardDelete={handleCardDelete}\n\n                            />\n                            {loggedIn ? (<Redirect to=\"/\"/>) : (<Redirect to=\"/signin\"/>)}\n                        </Route>\n\n\n                    </Switch>\n                    <Footer/>\n\n                    <EditProfilePopup isOpen={isEditProfilePopupOpen}\n                                      onUpdateUser={handleUpdateUser}\n                                      onClose={closeAllPopups}/>\n\n                    <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                                   onAddPlaceSubmit={handleAddPlace}\n                                   onClose={closeAllPopups}/>\n\n                    <EditAvatarPopup isOpen={isEditAvatarPopupOpen}\n                                     onUpdateAvatar={handleUpdateAvatar}\n                                     onClose={closeAllPopups}/>\n\n                    <PopupWithForm name=\"delete-image\" title=\"Вы уверены?\" buttonName=\"Да\"/>\n\n                    <ImagePopup\n                        card={selectedCard}\n                        onClose={closeAllPopups}\n                        isOpen={isImagePopupOpen}\n                    />\n                </div>\n            </CurrentUserContext.Provider>\n        </div>\n    );\n}\n\n\nexport default withRouter(App);\n\n"]},"metadata":{},"sourceType":"module"}