{"version":3,"sources":["images/header-logo.svg","components/Header.js","images/pen-only.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/InfoTooltip.js","components/ProtectedRoute.js","images/info-tooltip-fail.svg","images/info-tooltip-success.svg","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","email","userData","className","src","logo","alt","path","to","onClick","onSignOut","CurrentUserContext","React","createContext","Card","onCardClick","onCardDelete","onCardLike","cardLink","cardName","cardLikes","card","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","Main","onEditAvatar","onEditProfile","onAddPlace","cards","handleCardClick","avatar","penAvatar","name","about","map","link","length","Footer","PopupWithForm","isOpen","onClose","onSubmit","title","children","buttonName","action","noValidate","ImagePopup","api","config","getCardList","_fetch","getUserInfo","deleteLike","id","putLike","changeLikeCardStatus","deleteCard","setUserInfo","setUserAvatar","addNewCard","body","this","url","headers","method","options","JSON","stringify","fetch","then","res","ok","json","Promise","reject","status","authorization","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","onChange","target","value","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","avatarInputRef","createRef","current","ref","AddPlacePopup","onAddPlaceSubmit","cardNameRef","cardLinkRef","Login","state","password","handleChange","bind","handleSubmit","setState","handleLogin","Component","withRouter","Register","onRegister","InfoTooltip","image","ProtectedRoute","component","loggedIn","BASE_URL","setLoggedIn","registered","setRegistered","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setEmail","localStorage","getItem","jwt","token","data","history","push","catch","error","console","log","closeAllPopups","setIsImagePopupOpen","setCards","selectedCard","setSelectedCard","isImagePopupOpen","setCurrentUser","Provider","removeItem","fail","auth","hasOwnProperty","setItem","err","setTimeout","successImg","response","exact","newCard","c","_","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.766766ff.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.abb64ac9.svg\";","import React from \"react\";\nimport logo from \"../images/header-logo.svg\";\nimport {Link, Route, Switch} from 'react-router-dom';\n\nfunction Header(props) {\n    let {email} = props.userData;\n    return (\n        <header className=\"header page__container\">\n            <img src={logo} alt=\"логотип\" className=\"header__logo\"/>\n            <Switch>\n                <Route path={'/signup'}><Link to=\"/signin\" className=\"header__link\">Войти</Link></Route>\n                <Route path={'/signin'}><Link to=\"/signup\" className=\"header__link\">Регистрация</Link></Route>\n                <Route path={'/'}>\n                    <div className=\"header__logged\">\n                        <p className=\"header__email\">{email}</p>\n                        <Link onClick={props.onSignOut} to=\"/signin\" className=\"header__link\">Выйти</Link>\n                    </div>\n                </Route>\n\n            </Switch>\n        </header>\n    );\n}\n\nexport default Header;","export default __webpack_public_path__ + \"static/media/pen-only.9d2eb8c1.svg\";","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\n\nfunction Card({onCardClick, onCardDelete, onCardLike, cardLink, cardName, cardLikes, card}) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const isOwn = card.owner._id === currentUser._id;\n    const cardDeleteButtonClassName = (\n        `card__trash ${isOwn ? 'card__trash_visible' : 'card__trash_hidden'}`\n    );\n\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    const cardLikeButtonClassName = (\n        `card__like ${isLiked ? 'card__like_active' : 'card__like_disabled'}`\n    );\n    const handleLikeClick = () => {\n        onCardLike(card);\n\n    };\n    const handleDeleteClick = () => {\n        onCardDelete(card);\n    };\n\n    return (\n        <li className=\"card\">\n            <button type=\"button\" onClick={handleDeleteClick} className={cardDeleteButtonClassName}></button>\n            <img onClick={() => onCardClick(card)} src={cardLink} alt={cardName} className=\"card__image\"/>\n            <div className=\"card__conteiner\">\n                <h2 className=\"card__name\">{cardName}</h2>\n                <div className=\"card__like-conteiner\">\n                    <button onClick={handleLikeClick} type=\"button\" className={cardLikeButtonClassName}></button>\n                    <p className=\"card__like-number\">{cardLikes}</p>\n                </div>\n            </div>\n        </li>\n    );\n}\n\nexport default Card;","import React from \"react\";\nimport penAvatar from '../images/pen-only.svg';\nimport Card from \"./Card\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Main({onEditAvatar, onEditProfile, onAddPlace, cards, handleCardClick, onCardLike, onCardDelete}) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n            <section className=\"profile page__container\">\n                <div className=\"profile__container\">\n                    <img src={currentUser.avatar} alt=\"аватар профайла\" className=\"profile__avatar\"/>\n                    <div className=\"profile__overlay\">\n                        <img onClick={onEditAvatar} src={penAvatar} alt=\"редактор аватара\"\n                             className=\"profile__avatar-pen\"/>\n                    </div>\n                </div>\n                <div className=\"profile__info\">\n                    <div className=\"profile__title\">\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\n                        <button onClick={onEditProfile} type=\"button\" className=\"profile__button\"></button>\n                    </div>\n\n                    <p className=\"profile__description\">{currentUser.about}</p>\n                </div>\n                <button onClick={onAddPlace} type=\"button\" className=\"profile__add-button\"></button>\n\n\n            </section>\n            <section className=\"elements page__container\">\n                <ul className=\"elements-cards\">\n                    {\n                        cards.map((card, i) =>\n                            <Card\n                                key={card._id}\n                                onCardClick={handleCardClick}\n                                onCardLike={onCardLike}\n                                onCardDelete={onCardDelete}\n                                cardLink={card.link}\n                                cardName={card.name}\n                                alt={card.name}\n                                cardLikes={card.likes.length}\n                                card={card}\n\n                            />\n                        )\n                    }\n\n\n                </ul>\n            </section>\n        </main>\n\n\n    );\n\n}\n\n\nexport default Main;","import React from \"react\";\n\nfunction Footer() {\n    return (\n        <footer className=\"footer page__container\">\n            <p className=\"footer__copyright\">&copy;2020. Mesto Russia</p>\n        </footer>\n    );\n}\n\nexport default Footer;\n","import React from \"react\";\n\nfunction PopupWithForm({name, isOpen, onClose, onSubmit, title, children, buttonName}) {\n    return (\n        <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`}>\n            <div className=\"popup__content\">\n                <button onClick={onClose} type=\"button\"\n                        className={`popup__close popup__close_type_${name}`}></button>\n                <form onSubmit={onSubmit} action=\"#\" name=\"popup-form\"\n                      className={`popup__form popup__form_type_${name}`}\n                      noValidate>\n                    <h2 className=\"popup__title\">{title}</h2>\n                    {children}\n                    <button type=\"submit\" className=\"popup__btn\">{buttonName}</button>\n                </form>\n\n            </div>\n        </div>\n\n    );\n}\n\nexport default PopupWithForm;","import React from \"react\";\n\nfunction ImagePopup({isOpen, onClose, card}) {\n    return (\n        <div className={`popup popup_type_image ${isOpen ? 'popup_opened' : ''}`}>\n            <div className=\"popup__container\">\n                <button onClick={onClose} type=\"button\" className=\"popup__close popup__close_type_image\"></button>\n                <img src={card.link} alt={card.name} className=\"popup__image\"/>\n                <p className=\"popup__description\">{card.name}</p>\n            </div>\n\n        </div>\n    );\n}\n\nexport default ImagePopup;","export class Api {\n    constructor(config) {\n        this.url = config.url;\n        this.headers = config.headers;\n    }\n\n\n    getCardList = () => this._fetch('GET', '/cards');\n\n    getUserInfo = () => this._fetch('GET', '/users/me');\n\n    deleteLike = (id) => this._fetch('DELETE', '/cards/likes/' + id);\n\n    putLike = (id) => this._fetch('PUT', '/cards/likes/' + id);\n\n    changeLikeCardStatus = (id, isLiked) => isLiked ? this.putLike(id) : this.deleteLike(id);\n\n    deleteCard = (id) => this._fetch('DELETE', '/cards/' + id);\n\n    setUserInfo = (name, about) => this._fetch('PATCH', '/users/me', {name, about});\n\n    setUserAvatar = (link) => this._fetch('PATCH', '/users/me/avatar', {'avatar': link});\n\n    addNewCard = (body) => this._fetch('POST', '/cards', body);\n\n\n    _fetch(method, path, body) {\n        let options = {\n            method,\n            headers: this.headers,\n        };\n        if ((method === 'PATCH' || method === 'POST') && body) {\n            options = {\n                ...options,\n                body: JSON.stringify(body)\n            };\n        }\n        return fetch(this.url + 'cohort-25' + path, options)\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(`Ошибка: ${res.status}`);\n            });\n    }\n}\n\nconst api = new Api({\n    url: 'https://mesto.nomoreparties.co/v1/',\n    headers: {\n        authorization: '6c5c2ad0-ab62-45ad-b6d9-d0d31ad5dd6b',\n        'Content-type': 'application/json'\n    }\n});\nexport default api;\n\n\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\n\nfunction EditProfilePopup({isOpen, onUpdateUser, onClose}) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const [name, setName] = React.useState('');\n    const [description, setDescription] = React.useState('');\n\n\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n    }, [currentUser, isOpen]);\n\n    const handleChangeName = (e) => {\n        setName(e.target.value);\n    };\n    const handleChangeDescription = (e) => {\n        setDescription(e.target.value);\n    };\n\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onUpdateUser({\n            name,\n            about: description,\n        });\n\n    }\n\n\n    return (\n        <PopupWithForm name=\"profile\" title=\"Редактировать профиль\" buttonName=\"Сохранить\"\n                       isOpen={isOpen}\n                       onSubmit={handleSubmit}\n                       onClose={onClose}>\n\n\n            <input onChange={handleChangeName} value={name || ''} id=\"popup-name\" type=\"text\" name=\"popup-name\"\n                   placeholder=\"Имя\"\n                   className=\"popup__input popup__input_type_name\"\n                   minLength=\"2\" maxLength=\"40\" required\n            />\n            <span className=\"popup__input-error\" id=\"popup-name-error\"></span>\n            <input onChange={handleChangeDescription} value={description || ''} id=\"popup-job\" type=\"text\"\n                   name=\"popup-job\"\n                   placeholder=\"О себе\"\n                   className=\"popup__input popup__input_type_job\"\n                   minLength=\"2\" maxLength=\"200\" required/>\n            <span className=\"popup__input-error\" id=\"popup-job-error\"></span>\n\n\n        </PopupWithForm>\n    );\n}\n\nexport default EditProfilePopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\n\nfunction EditAvatarPopup({onUpdateAvatar, isOpen, onClose}) {\n    const avatarInputRef = React.createRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onUpdateAvatar(avatarInputRef.current.value);\n    }\n\n    React.useEffect(() => {\n        avatarInputRef.current.value = '';\n    }, [avatarInputRef, isOpen]);\n\n    return (\n        <PopupWithForm name=\"update-avatar\" title=\"Обновить аватар\" buttonName=\"Сохранить\"\n                       onSubmit={handleSubmit}\n                       isOpen={isOpen}\n                       onClose={onClose}>\n\n            <input ref={avatarInputRef} id=\"avatar-link\" type=\"url\" name=\"avatar-link\"\n                   placeholder=\"Ссылка на аватар\"\n                   className=\"popup__input popup__input_type_avatar-link\"\n                   required/>\n            <span className=\"popup__input-error\" id=\"avatar-link-error\"></span>\n\n\n        </PopupWithForm>\n    );\n}\n\nexport default EditAvatarPopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({onAddPlaceSubmit, isOpen, onClose}) {\n\n    const cardNameRef = React.createRef();\n    const cardLinkRef = React.createRef();\n\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onAddPlaceSubmit(e, {\n            link: cardNameRef.current.value,\n            name: cardLinkRef.current.value\n        });\n    }\n\n    React.useEffect(() => {\n        cardNameRef.current.value = '';\n        cardLinkRef.current.value = '';\n    }, [cardNameRef, cardLinkRef, isOpen]);\n\n    return (\n        <PopupWithForm name=\"mesto\" title=\"Новое место\"\n                       onSubmit={handleSubmit}\n                       isOpen={isOpen}\n                       onClose={onClose}\n                       buttonName=\"Создать\">\n\n\n            <input ref={cardLinkRef} id=\"mesto-name\" type=\"text\" name=\"mesto-name\" placeholder=\"Название\"\n                   className=\"popup__input popup__input_type_mesto-name\"\n                   minLength=\"2\" maxLength=\"30\" required/>\n            <span className=\"popup__input-error\" id=\"mesto-name-error\"></span>\n            <input ref={cardNameRef} id=\"mesto-image-link\" type=\"url\" name=\"mesto-image-link\"\n                   placeholder=\"Ссылка на картинку\"\n                   className=\"popup__input popup__input_type_mesto-image-link\"\n                   required/>\n            <span className=\"popup__input-error\" id=\"mesto-image-link-error\"></span>\n\n\n        </PopupWithForm>\n    );\n}\n\nexport default AddPlacePopup;","import React from \"react\";\nimport {withRouter} from \"react-router-dom\";\n\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: '',\n            password: ''\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(e) {\n        const {name, value} = e.target;\n        this.setState({\n            [name]: value\n        });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        if (!this.state.password || !this.state.email) {\n\n            return;\n        }\n        this.props.handleLogin(this.state.password, this.state.email);\n\n    }\n\n    render() {\n        return (\n            <div className=\"login\">\n                <p className=\"login__title\">\n                    Вход\n                </p>\n                <form onSubmit={this.handleSubmit} className=\"login__form\">\n                    <input onChange={this.handleChange} value={this.state.email} id=\"email\" type=\"email\" name=\"email\"\n                           placeholder=\"Email\"\n                           className=\"login__input login__input_type_email\"\n                           minLength=\"5\" maxLength=\"40\" required\n                    />\n\n                    <input onChange={this.handleChange} value={this.state.password} id=\"password\" type=\"password\"\n                           name=\"password\"\n                           placeholder=\"Пароль\"\n                           className=\"login__input login__input_password\"\n                           minLength=\"8\" maxLength=\"200\" required/>\n\n                    <button type=\"submit\" className=\"login__btn\">Войти</button>\n                </form>\n\n            </div>\n        );\n    }\n}\n\nexport default withRouter(Login);","import React from 'react';\nimport {Link, withRouter} from 'react-router-dom';\n\nclass Register extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: '',\n            password: '',\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange = (e) => {\n        const {name, value} = e.target;\n        this.setState({\n            [name]: value\n        });\n    };\n\n    handleSubmit = (e) => {\n\n        e.preventDefault();\n        this.props.onRegister(this.state.password, this.state.email);\n\n    };\n\n    render() {\n        return (\n            <div className=\"register\">\n                <p className=\"register__title\">\n                    Регистрация\n                </p>\n                <form onSubmit={this.handleSubmit} className=\"register__form\">\n\n                    <input onChange={this.handleChange} value={this.state.email} id=\"email\" type=\"email\" name=\"email\"\n                           placeholder=\"Email\"\n                           className=\"register__input register__input_type_email\"\n                           minLength=\"5\" maxLength=\"40\" required\n                    />\n\n\n                    <input onChange={this.handleChange} value={this.state.password} id=\"password\" type=\"password\"\n                           name=\"password\"\n                           placeholder=\"Пароль\"\n                           className=\"register__input register__input_password\"\n                           minLength=\"8\" maxLength=\"200\" required/>\n\n\n                    <button type=\"submit\"\n                            className=\"register__btn\">Зарегистрироваться\n                    </button>\n                    <p className=\"register__signin\">Уже зарегистрированы?\n                        <Link to=\"/signin\" className=\"register__signin-link\"> Войти</Link>\n                    </p>\n\n                </form>\n\n            </div>\n        );\n    }\n\n}\n\nexport default withRouter(Register);\n","import React from \"react\";\n\n\nfunction InfoTooltip({isOpen, onClose, title, image}) {\n    return (\n        <div className={`popup popup_type_info-tooltip ${isOpen ? 'popup_opened' : ''}`}>\n            <div className=\"popup__content\">\n                <button onClick={onClose} type=\"button\"\n                        className={`popup__close popup__close_type_info-tooltip`}></button>\n                <img src={image} alt=\"изображение\" className=\"popup__info-tooltip-image\"/>\n                <p className=\"popup__info-tooltip-title\">{title}</p>\n            </div>\n        </div>\n\n    );\n}\n\nexport default InfoTooltip;","import React from 'react';\nimport {Route, Redirect} from 'react-router-dom';\n\nconst ProtectedRoute = ({component: Component, ...props}) => {\n    return(\n      <Route>\n          {() =>\n          props.loggedIn ? <Component {...props}/> : <Redirect to='./signin'/>}\n      </Route>\n    )\n}\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/info-tooltip-fail.df8eddf6.svg\";","export default __webpack_public_path__ + \"static/media/info-tooltip-success.1b6082f8.svg\";","export const BASE_URL = 'https://auth.nomoreparties.co';\n\n\nexport const register = (password, email) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({password, email})\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .then((res) => {\n            return res;\n        });\n\n};\n\nexport const authorize = (password, email) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({password, email})\n    })\n        .then(res => res.json())\n        .then((data) => {\n\n            if (data.token) {\n                return data;\n            }\n        });\n\n};\n\n\nexport const checkToken = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`\n\n        }\n    })\n        .then(res => res.json())\n        .then(data => data);\n};\n","import React, {useEffect} from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport {Redirect, Route, Switch, withRouter} from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport fail from '../images/info-tooltip-fail.svg';\nimport successImg from '../images/info-tooltip-success.svg';\nimport * as auth from '../utils/auth.js';\n\n\nfunction App(props) {\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [registered, setRegistered] = React.useState(false);\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n\n    const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n    const [email, setEmail] = React.useState({});\n\n    const onSignOut = () => {\n        localStorage.removeItem('token');\n        setRegistered(false);\n    };\n\n    const onLogin = (password, email) => {\n        auth.authorize(password, email)\n            .then((data) => {\n                if (data && data.hasOwnProperty('token')) {\n                    localStorage.setItem('token', data.token);\n                    setEmail({email: email});\n                    setLoggedIn(true);\n                    props.history.push(\"/\");\n                } else {\n                    setIsInfoTooltipOpen(true);\n                }\n            })\n            .catch(err => {\n                setIsInfoTooltipOpen(true);\n                console.log(err);\n            });\n    };\n\n\n    useEffect(() => {\n        if (localStorage.getItem('token')) {\n            const jwt = localStorage.getItem('token');\n            // проверяем токен пользователя\n            auth.checkToken(jwt)\n                .then((res) => {\n                    if (res) {\n                        setEmail({email: res.data.email});\n                        setLoggedIn(true);\n                    }\n\n                })\n                .then(() => {\n                    props.history.push(\"/\");\n\n                })\n                .catch(error => {\n                    console.log(error);\n                });\n\n        }\n    }, [props.history]);\n\n\n\n\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen(true);\n    };\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen(true);\n    };\n\n    const handleEditAvatarClick = () => {\n        setIsEditAvatarPopupOpen(true);\n    };\n\n\n    const onInfoTooltipClose = () => {\n        closeAllPopups();\n        if (registered) {\n            setTimeout(() => props.history.push(\"/signin\"), 1000);\n        }\n\n    };\n\n    const closeAllPopups = () => {\n        setIsInfoTooltipOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setIsImagePopupOpen(false);\n    };\n\n    const handleCardClick = (card) => {\n        setSelectedCard(card);\n        setIsImagePopupOpen(true);\n    };\n\n\n    const [cards, setCards] = React.useState([]);\n    const [selectedCard, setSelectedCard] = React.useState({});\n    const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n    useEffect(() => {\n        api.getCardList()\n            .then(data => {\n                setCards(data);\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }, []);\n\n    const [currentUser, setCurrentUser] = React.useState({});\n\n    useEffect(() => {\n        api.getUserInfo()\n            .then(data => {\n                setCurrentUser(data);\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }, []);\n\n    const handleRegister = (password, email) => {\n\n        auth.register(password, email)\n            .then((res) => {\n                if (res.hasOwnProperty('error')) {\n                    setRegistered(false);\n                } else {\n                    setRegistered(true);\n                }\n                setIsInfoTooltipOpen(true);\n            })\n            .catch((err) => console.log(err));\n    };\n\n    const handleUpdateUser = (currentUser) => {\n        api.setUserInfo(currentUser.name, currentUser.about)\n            .then(data => {\n                setCurrentUser(data);\n                closeAllPopups();\n\n            })\n            .catch(error => {\n                console.log(error);\n            });\n\n    };\n\n    const handleUpdateAvatar = (avatar) => {\n        api.setUserAvatar(avatar)\n            .then(data => {\n                setCurrentUser(data);\n                closeAllPopups();\n            })\n            .catch(error => {\n                console.log(error);\n            });\n\n    };\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        // Отправляем запрос в API и получаем обновлённые данные карточки\n        api.changeLikeCardStatus(card._id, !isLiked)\n            .then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n            .then(_ => {\n                setCards((state) => state.filter((c) => c._id !== card._id));\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    function handleAddPlace(e, card) {\n        api.addNewCard(card)\n            .then(card => {\n                setCards([card, ...cards]);\n                closeAllPopups();\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }\n\n    return (\n        <div className=\"App\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <div className=\"page\">\n                    <Header onSignOut={onSignOut} userData={email}/>\n                    <Switch>\n                        <Route path=\"/signin\">\n\n                            <InfoTooltip\n                                isOpen={isInfoTooltipOpen}\n                                onClose={closeAllPopups}\n                                image={fail}\n                                title={'Что-то пошло не так! Попробуйте ещё раз.'}\n\n                            />\n                            <Login handleLogin={onLogin}/>\n                        </Route>\n                        <Route path=\"/signup\">\n\n                            <InfoTooltip\n                                isOpen={isInfoTooltipOpen}\n                                onClose={onInfoTooltipClose}\n                                image={registered ? successImg : fail}\n                                title={registered ? 'Вы успешно зарегестрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\n\n                            />\n                            <Register\n                                onRegister={handleRegister}/>\n\n                        </Route>\n\n                        <Route>\n\n\n                            <ProtectedRoute exact path=\"/\"\n                                            loggedIn={loggedIn}\n                                            component={Main}\n                                            onEditProfile={handleEditProfileClick}\n                                            onAddPlace={handleAddPlaceClick}\n                                            onEditAvatar={handleEditAvatarClick}\n                                            cards={cards}\n                                            handleCardClick={handleCardClick}\n                                            setCards={setCards}\n                                            onCardLike={handleCardLike}\n                                            onCardDelete={handleCardDelete}\n\n                            />\n                            {loggedIn ? (<Redirect to=\"/\"/>) : (<Redirect to=\"/signin\"/>)}\n                        </Route>\n\n\n                    </Switch>\n                    <Footer/>\n\n                    <EditProfilePopup isOpen={isEditProfilePopupOpen}\n                                      onUpdateUser={handleUpdateUser}\n                                      onClose={closeAllPopups}/>\n\n                    <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                                   onAddPlaceSubmit={handleAddPlace}\n                                   onClose={closeAllPopups}/>\n\n                    <EditAvatarPopup isOpen={isEditAvatarPopupOpen}\n                                     onUpdateAvatar={handleUpdateAvatar}\n                                     onClose={closeAllPopups}/>\n\n                    <PopupWithForm name=\"delete-image\" title=\"Вы уверены?\" buttonName=\"Да\"/>\n\n                    <ImagePopup\n                        card={selectedCard}\n                        onClose={closeAllPopups}\n                        isOpen={isImagePopupOpen}\n                    />\n                </div>\n            </CurrentUserContext.Provider>\n        </div>\n    );\n}\n\n\nexport default withRouter(App);\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <BrowserRouter >\n          <App />\n      </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}